const CHARS="abcdefghijklmnopqrstuvwxyz'",VOWELS_REGEX=new RegExp("[aeiou]","gi"),CONSONANTS_REGEX=new RegExp("[bcdfghjklmnpqrstvwxyz']","gi"),MIN_WORD_LENGTH=2,MAX_WORD_LENGTH=14,MIN_VOWEL_RATIO=.08,MAX_VOWEL_RATIO=.83,MIN_CONSONANT_RATIO=.25,MAX_CONSONANT_RATIO=.9,DATA_MAPPING=["S|2","S|3","E|2","E|3","G|2","G|3","G|4","O|0"],DATA_SEPARATOR=124,DATA_FAULT_TOLERANCE=0;let MAP=[];const initMap=t=>{MAP=DATA_MAPPING.map((()=>[])),setMap(t)},setMap=t=>{let A=0,n=0;t.forEach(((e,O)=>{if(e==DATA_SEPARATOR)n++,A=0;else{let i=DATA_MAPPING[n].split("|"),_=parseInt(i[1]);if(_){if(A%_==0){for(let o="",s=0;_>s;s++)o+=CHARS[t[O+s]];MAP[n].push(o)}}else MAP[n].push(t[O]);A++}}))},testByData=t=>{let A=0;return DATA_MAPPING.forEach(((n,e)=>{n=n.split("|");let O=n[0],i=parseInt(n[1]);if("S"==O){let _=t.substr(0,i);-1!=MAP[e].indexOf(_)&&A++}else if("E"==O){let _=t.substr(-i);-1!=MAP[e].indexOf(_)&&A++}else if("G"==O)for(let o=0;o<t.length-(i-1);o++){for(let _="",s=0;i>s;s++)_+=t[o+s];-1!=MAP[e].indexOf(_)&&A++}else if("O"==O){for(let N={},o=0;o<t.length;o++)N[t[o]]=N[t[o]]?N[t[o]]+1:1;for(let T in N)N.hasOwnProperty(T)&&N[T]/t.length*255>MAP[e][CHARS.indexOf(T)]&&A++}})),DATA_FAULT_TOLERANCE>=A},testByLength=t=>{return t.length<=MAX_WORD_LENGTH&&t.length>=MIN_WORD_LENGTH},testByVowelRatio=t=>{let A=t.match(VOWELS_REGEX);A=A?A.length:0;let n=A/t.length;return n>=MIN_VOWEL_RATIO&&MAX_VOWEL_RATIO>=n},testByConsonantRatio=t=>{let A=t.match(CONSONANTS_REGEX);A=A?A.length:0;let n=A/t.length;return n>=MIN_CONSONANT_RATIO&&MAX_CONSONANT_RATIO>=n},testWord=t=>t?testByLength(t)&&testByVowelRatio(t)&&testByConsonantRatio(t)&&testByData(t):!1;module.exports={init:initMap,test:testWord};